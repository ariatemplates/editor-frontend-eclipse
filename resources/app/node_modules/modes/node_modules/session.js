var oop = require('oop').oop;

/**
 * Behaves like a simple store of data with auto-generated key.
 *
 * @todo Be able when initiated a session to pass a callback to init data. Or just pass initial data.
 */
var SessionManager = oop.Class({
	name: 'Session Manager',

	init: function() {
		this.sessions = {};
		this.sessionId = 0;
	},

	methods: {
		init: function(data) {
			var id = this._generateId(data);
			this.sessions[id] = data;
			return id;
		},

		_generateId: function(data) {
			while (this.sessionId in this.sessions) {
				this.sessionId++;
			}

			return this.sessionId;
		},

		update: function(id, data) {
			this.sessions[id] = data;
			return data;
		},

		get: function(id) {
			return this.sessions[id];
		}
	}
});



exports.SessionManager = SessionManager;
