_modes_ are modules implementing source code edition services for specific languages.

Modes might use each other.

# File system layout

* `README.md`: this current file
* `parser.md`: an article about how to create a parser
* `node_modules`: common resources for modes

__All the other folders not already mentioned are modes, please refer to their respective documentations for more details.__

# Versioning

To version: _everything_.

# Documentation

## Parser creation

This section describes the choices made to create parsers when this is needed.

### Requirements

Here are the requirements of the parser:

* generate at least a tree
* keep location information, both as ranges (indexes in the full string of code) and coordinates (line/column model)
* ...

### Choice

As all the points mentionned above involve a strong knowledge of both the language we want to manage and the theory of formal languages, we won't have time to totally proceed like this.

We will refer to a strong power which is the community.

One of the most famous tool to generate parsers in JavaScript is [PEG.js](http://pegjs.majda.cz/). It uses the [parsing expression grammar](http://en.wikipedia.org/wiki/Parsing_expression_grammar) model, which is apparently more powerful than other more traditional ones.

# Contribute

## Development

You can either work on the common library for modes in `node_modules` or on a specific mode.

Please refer to the respective documentations.

## Documentation

* Put the artcile in `parser.md` about the parser creation process in the wiki
* Write an article more specifically about PEG.js
	* description, links to resources
	* how I use it in the project (how I prefer structuring the grammar, using the initializer, ...)
	* what interesting things I learned about PEG.js (which are not obvious): like the possibility to call a specific rule with the `parse` method
	* which version I use

## Parser creation

Maybe we could consider using [Jison](https://github.com/zaach/jison) to generate the parser. I don't know it fully yet but had an overview of it whil ereading [this article about sourcemaps](https://hacks.mozilla.org/2013/05/compiling-to-javascript-and-debugging-with-source-maps/).

Pros:

* using data instead of a DSL
* separates the lexer and the grammar: automatically generates tokens and forces to use them
* famous

Cons:

* the data is put into strings with weak meaning, I mean that we could also put the PEG.js DSL content into strings. Here, strings are either rules or JavaScript code. It's the same. However, as this is standard JS data, we can add our own layer on it, preprocessing the rules, doing whatever we want.
* I don't know how we would handle parts of free text as we do it now with PEG.

Moreover, I think we can also use data with PEG.js, by _hacking_ it a little. And finally I like the way PEG.js is detached from the usual formalisms, using stringly different models for closely related things: tokens, trees. I just want to build a graph. For everything, almost every character in the code. The distinction between syntax and semantics comes later on for me.