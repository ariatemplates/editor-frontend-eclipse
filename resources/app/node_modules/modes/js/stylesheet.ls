/**
 * Exports a stylesheet for highlighting.
 *
 * This avoids the need to return styling information everytime highlights is required, as this will not change often.
 */

################################################################################
# Colors - Factory & constants
################################################################################

# Factories --------------------------------------------------------------------

rgb = (r, g, b) -> {r, g, b}
# rgb = (r, g, b) -> [r, g, b] # Optimized form?


greyScale = (a) -> rgb a, a, a
blueScale = rgb 0 0 _
greenScale = rgb 0 _, 0
redScale = rgb _, 0 0

# Constants --------------------------------------------------------------------

black = greyScale 0
white = greyScale 255
grey = greyScale 128
red = redScale 255
green = greenScale 255
blue = blueScale 255



################################################################################
# Tokens - Factory
#
# FIXME The style property should not exist, it's far easier to use flags (for italic, bold, ...) to be able to combine them
# TODO Create a class for that, accepting better inputs.
################################################################################

transformToken = (token) -> {
	token.color
	token.bgcolor
	font: token.font.name
	(token.font).height
	(token.font).style
}

# transformToken = (token) -> {
# 	c: token.color
# 	bg: token.bgcolor
# 	f: token.font.name
# 	h: token.font.height
# 	s: token.font.style
# }

tokenFactory = ->
	[color, bgcolor, font, height, style] = it

	transformToken {
		color
		bgcolor
		font = {
			name: font
			height
			style
		}
	}


################################################################################
# Stylesheet - Factory & definition
################################################################################

build = (def, specs) -> {
	'default': tokenFactory def
	tokens: {[spec.0, tokenFactory spec[1 to]] for spec in specs}
}





_default = [black, white, 'Consolas' 12 'normal']
tokens = [
	['Keyword' blue]
	['Comment' greenScale 128, , , , 'italic']
	['Punctuator' red, , , , 'bold']
	['Numeric' rgb 64 128 32]
]

return module.exports = build _default, tokens
